var __reflect=this&&this.__reflect||function(e,t,o){e.__class__=t,o?o.push(t):o=[t],e.__types__=e.__types__?o.concat(e.__types__):o},mouse;!function(e){var t=function(){function e(){}return e}();t.MOUSE_MOVE="mouseMove",t.MOUSE_OVER="mouseOver",t.MOUSE_OUT="mouseOut",t.ROLL_OVER="rollOver",t.ROLL_OUT="rollOut",t.WHEEL="wheel",e.MouseEvent=t,__reflect(t.prototype,"mouse.MouseEvent")}(mouse||(mouse={}));var mouse;!function(e){e.stageMouseX=0,e.stageMouseY=0;var t,o,n,s,u=[],r=new egret.Point,i=new egret.Rectangle,a=function(e,t){var o=t.indexOf(e);return-1!=o?(t.splice(o,1),!0):!1},l=function(o,r,i,l,v){var c=v?v:t;if(s&&c.buttonModeForMouse)try{var E=n.$displayList.renderBuffer.surface;o==e.MouseEvent.ROLL_OVER||o==e.MouseEvent.MOUSE_OVER?E.style.cursor="pointer":(o==e.MouseEvent.ROLL_OUT||o==e.MouseEvent.MOUSE_OUT)&&t==c&&(E.style.cursor="auto")}catch(O){}o==e.MouseEvent.ROLL_OVER&&c.isRollOver||(o==e.MouseEvent.ROLL_OVER?c.isRollOver=!0:o==e.MouseEvent.ROLL_OUT&&(c.isRollOver=!1),o==e.MouseEvent.ROLL_OVER?u.push(c):o==e.MouseEvent.ROLL_OUT&&a(c,u),egret.TouchEvent.dispatchTouchEvent(c,o,r,!1,i,l,null))};e.enable=function(a){function c(e){for(var t,o=document.body.children,n=0;n<o.length;n++)if("DIV"==o[n].nodeName&&"egret-player"==o[n].className){for(var s=o[n].children,u=0;u<s.length;u++)if("CANVAS"==s[u].nodeName){t=s[u];break}break}var r=(e.pageX-t.offsetLeft)*(t.width/t.clientWidth),i=(e.pageY-t.offsetTop)*(t.height/t.clientHeight);return{x:r,y:i}}function E(t){t=t||window.event;var o=c(t);e.stageMouseX=o.x,e.stageMouseY=o.y,h=o.x,M=o.y,O(o.x,o.y)}s="Windows PC"==egret.Capabilities.os||"Mac OS"==egret.Capabilities.os,n=a;var O=function(o,n){if(t&&(!t.$stage||0>o||o>a.stageWidth||0>n||n>a.stageHeight))return l(e.MouseEvent.MOUSE_OUT,!0,o,n),l(e.MouseEvent.ROLL_OUT,!1,o,n),t=null,void 0;var s=a.$hitTest(o,n);null!=s&&s!=a?t?s!=t&&(l(e.MouseEvent.MOUSE_OUT,!0,o,n),t.$getConcatenatedVisible()&&t.hitTestPoint(o,n,!0)||l(e.MouseEvent.ROLL_OUT,!1,o,n),t=s,l(e.MouseEvent.ROLL_OVER,!1,o,n),l(e.MouseEvent.MOUSE_OVER,!0,o,n)):(t=s,l(e.MouseEvent.ROLL_OVER,!1,o,n),l(e.MouseEvent.MOUSE_OVER,!0,o,n)):t&&(l(e.MouseEvent.MOUSE_OUT,!0,o,n),l(e.MouseEvent.ROLL_OUT,!1,o,n),t=null)},h=0/0,M=0/0;document.onmousemove=E;var _=egret.sys.TouchHandler.prototype.onTouchMove;egret.sys.TouchHandler.prototype.onTouchMove=function(t,o,s){if(h=t,M=o,_.call(this,t,o,s),v){var u=n.$hitTest(t,o);u||(u=n),egret.TouchEvent.dispatchTouchEvent(u,e.MouseEvent.MOUSE_MOVE,!0,!0,t,o,s,!0)}O(t,o)};var f=egret.sys.TouchHandler.prototype.onTouchBegin;egret.sys.TouchHandler.prototype.onTouchBegin=function(e,t,n){f.call(this,e,t,n);var s=a.$hitTest(e,t);null!=s&&s!=a&&(o=s),O(e,t)};var d=egret.sys.TouchHandler.prototype.onTouchEnd;egret.sys.TouchHandler.prototype.onTouchEnd=function(e,t,o){d.call(this,e,t,o),O(e,t)},a.addEventListener(egret.Event.ENTER_FRAME,function(){if(0/0!=h&&0/0!=M&&(O(h,M),u.length>0)){for(var t=[],o=0;o<u.length;o++)g(u[o])&&null!=u[o].parent||t.push(u[o]);for(var o=0;o<t.length;o++)l(e.MouseEvent.ROLL_OUT,!1,h,M,t[o])}},null);var g=function(e){return e.localToGlobal(0,0,r),i.width=e.width,i.height=e.height,i.x=r.x,i.y=r.y,i.contains(h,M)?!0:e.hitTestPoint(h,M,!0)},T=function(t){t=t||window.event;var n,s=t.type;if(("DOMMouseScroll"==s||"mousewheel"==s)&&(n=t.wheelDelta?t.wheelDelta/120:-(t.detail||0)/3),null!=o){var t=new egret.TouchEvent(e.MouseEvent.WHEEL,!0);t.data=n,o.dispatchEvent(t)}};window.onmousewheel=document.onmousewheel=T},e.setButtonMode=function(e,t){e.buttonModeForMouse=t};var v=!1;e.setMouseMoveEnabled=function(e){v=e}}(mouse||(mouse={}));